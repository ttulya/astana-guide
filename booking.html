<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RelaxCaps ‚Äî –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Montserrat',sans-serif;background:#f0f4f8;padding-top:70px}

header{
  position:fixed;top:0;left:0;width:100%;height:60px;
  background:linear-gradient(to right,#00c6ff,#0072ff);
  display:flex;align-items:center;color:white;
  padding:0 20px;z-index:3000;
}

.burger{
  width:32px;height:22px;margin-right:15px;cursor:pointer;
  display:flex;flex-direction:column;justify-content:space-between;
}
.burger div{height:4px;background:white;border-radius:2px}

#menuToggle{display:none}

.side-menu{
  position:fixed;top:0;left:-250px;width:230px;height:100%;
  background:linear-gradient(to bottom,#00c6ff,#0072ff);
  padding-top:80px;transition:.3s;z-index:2600;
}

#menuToggle:checked + header + .side-menu{
  left:0;
}

.side-menu a{
  color:white;display:block;padding:15px 20px;
  text-decoration:none;font-weight:600;
  border-bottom:1px solid rgba(255,255,255,0.15);
}
.side-menu a:hover{color:#ffd700}

section{
  max-width:900px;margin:20px auto;background:white;
  padding:25px;border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

h2{color:#0072ff;margin-bottom:15px}

.btn{
  display:inline-block;background:#0072ff;color:white;
  padding:10px 18px;border-radius:6px;
  text-decoration:none;margin-top:10px;cursor:pointer;border:none;
}
.btn:hover{background:#005ec4}

.overlay{
  display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);justify-content:center;
  align-items:center;z-index:5000;
}

.popup{
  background:white;padding:25px;border-radius:12px;
  width:90%;max-width:380px;text-align:left;position:relative;
}

.closeBtn{
  position:absolute;top:10px;right:15px;
  font-size:20px;cursor:pointer;
}

input{
  width:100%;padding:10px;margin:8px 0;
  border-radius:6px;border:1px solid #aaa;
  font-family:'Montserrat',sans-serif;
}

label{font-size:0.9em;color:#444}

ul{margin:10px 0 6px;padding-left:20px;text-align:left;font-size:0.9em}

/* –ë–ª–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤ */
.price-box{
  background:#f5f8ff;
  border-radius:10px;
  padding:15px 18px;
  border:1px solid #dde5ff;
  margin-bottom:15px;
  font-size:0.95em;
}
.price-title{
  font-weight:600;
  color:#0072ff;
  margin-bottom:6px;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–∞—Ä–∏—Ñ–æ–≤ */
.tariff-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:12px;
  margin-top:10px;
}
.tariff-card{
  position:relative;
  border-radius:10px;
  padding:12px 14px;
  font-size:0.9em;
  color:#fff;
  overflow:hidden;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  cursor:pointer;
  transition:.2s;
}
.tariff-card:hover{
  transform:translateY(-2px) scale(1.01);
  box-shadow:0 6px 14px rgba(0,0,0,0.12);
}
.tariff-name{
  font-weight:600;
  margin-bottom:4px;
  font-size:0.95em;
}
.tariff-time{
  font-size:0.85em;
  opacity:0.95;
  margin-bottom:6px;
}
.tariff-price{
  font-size:0.95em;
  margin-bottom:2px;
}
.tariff-price span{
  font-weight:600;
}
.tariff-kzt{
  font-size:0.85em;
  opacity:0.95;
  margin-bottom:4px;
}

/* –∏–∫–æ–Ω–∫–∞+–æ–ø–∏—Å–∞–Ω–∏–µ */
.tariff-icon{
  font-size:1.3em;
  margin-bottom:4px;
}
.tariff-desc{
  font-size:0.8em;
  opacity:0.95;
}

/* –¶–≤–µ—Ç–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ */
.tariff-basic{
  background:linear-gradient(135deg,#4fc3f7,#0288d1);
}
.tariff-standard{
  background:linear-gradient(135deg,#ffb74d,#f57c00);
}
.tariff-comfort{
  background:linear-gradient(135deg,#ba68c8,#8e24aa);
}
.tariff-night{
  background:linear-gradient(135deg,#455a64,#1c313a);
}

/* –°—Ç–∏–∫–µ—Ä—ã / –±–µ–π–¥–∂–∏ */
.tariff-badge{
  position:absolute;
  top:8px;
  right:-10px;
  background:rgba(0,0,0,0.15);
  padding:3px 14px;
  font-size:0.75em;
  font-weight:600;
  transform:skewX(-12deg);
  text-transform:uppercase;
}
.tariff-badge span{
  display:inline-block;
  transform:skewX(12deg);
}

/* –ú–∞–ª–µ–Ω—å–∫–∞—è –ø–æ–¥–ø–∏—Å—å –ø–æ–¥ –∫—É—Ä—Å–æ–º */
.rate-note{
  font-size:0.8em;
  color:#666;
  margin-top:2px;
}
</style>
</head>

<body>

<!-- –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é –ó–ê–ö–†–´–¢–û –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
<input type="checkbox" id="menuToggle" />

<header>
  <label for="menuToggle" class="burger">
    <div></div><div></div><div></div>
  </label>
  <span style="font-size:1.3em;font-weight:600">RelaxCaps</span>
</header>

<aside class="side-menu">
  <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
  <a href="profile.html">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
  <a href="booking.html">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
  <a href="reviews.html">–û—Ç–∑—ã–≤—ã –∏ –æ—Ü–µ–Ω–∫–∏</a>
  <a href="contact.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
</aside>

<section>
  <h2>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>

  <div class="price-box">
    <div class="price-title">–¢–∞—Ä–∏—Ñ—ã –∏ –ø–∞–∫–µ—Ç—ã</div>

    <p style="margin-bottom:4px;color:#555;">
      üí± –¢–µ–∫—É—â–∏–π –∫—É—Ä—Å: <b id="rateText">–∑–∞–≥—Ä—É–∑–∫–∞...</b>
    </p>
    <p class="rate-note">* –ü–µ—Ä–µ—Å—á—ë—Ç –≤ —Ç–µ–Ω–≥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>

    <div class="tariff-grid">
      <!-- 1 —á–∞—Å -->
      <div class="tariff-card tariff-basic" onclick="openBooking(1)">
        <div class="tariff-badge"><span>–°—Ç–∞—Ä—Ç</span></div>
        <div class="tariff-icon">‚è±Ô∏è</div>
        <div class="tariff-name">–ë–∞–∑–æ–≤—ã–π</div>
        <div class="tariff-time">1 —á–∞—Å –æ—Ç–¥—ã—Ö–∞</div>
        <div class="tariff-price">
          <span>6 USD</span>
        </div>
        <div class="tariff-kzt">
          ‚âà <span id="p1">-</span> ‚Ç∏
        </div>
        <div class="tariff-desc">
          –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ–∂–¥—É –¥–µ–ª–∞–º–∏ –∏–ª–∏ –ø–µ—Ä–µ–¥ –∫–æ—Ä–æ—Ç–∫–∏–º —Ä–µ–π—Å–æ–º.
        </div>
      </div>

      <!-- 2 —á–∞—Å–∞ -->
      <div class="tariff-card tariff-standard" onclick="openBooking(2)">
        <div class="tariff-badge"><span>–•–∏—Ç</span></div>
        <div class="tariff-icon">‚úàÔ∏è</div>
        <div class="tariff-name">–°—Ç–∞–Ω–¥–∞—Ä—Ç</div>
        <div class="tariff-time">2 —á–∞—Å–∞ ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–µ—Å–∞–¥–∫–∏</div>
        <div class="tariff-price">
          <span>10 USD</span>
        </div>
        <div class="tariff-kzt">
          ‚âà <span id="p2">-</span> ‚Ç∏
        </div>
        <div class="tariff-desc">
          –ò–¥–µ–∞–ª–µ–Ω, –µ—Å–ª–∏ —É –≤–∞—Å —Å—Ç—ã–∫–æ–≤–∫–∞ –∏–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–π—Å–∞ –Ω–∞ –ø–∞—Ä—É —á–∞—Å–æ–≤.
        </div>
      </div>

      <!-- 3 —á–∞—Å–∞ -->
      <div class="tariff-card tariff-comfort" onclick="openBooking(3)">
        <div class="tariff-badge"><span>–õ—É—á—à–∏–π –≤—ã–±–æ—Ä</span></div>
        <div class="tariff-icon">üõèÔ∏è</div>
        <div class="tariff-name">–ö–æ–º—Ñ–æ—Ä—Ç</div>
        <div class="tariff-time">3 —á–∞—Å–∞ ‚Äî –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ–∂–∏–¥–∞–Ω–∏–π</div>
        <div class="tariff-price">
          <span>13 USD</span>
        </div>
        <div class="tariff-kzt">
          ‚âà <span id="p3">-</span> ‚Ç∏
        </div>
        <div class="tariff-desc">
          –ú–æ–∂–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏–ª–µ—á—å, –ø–æ—Å–ø–∞—Ç—å, –∑–∞—Ä—è–¥–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –∏ —Å–ø–æ–∫–æ–π–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –ø–æ—Å–∞–¥–∫–∏.
        </div>
      </div>

      <!-- –ù–æ—á–Ω–æ–π –ø–∞–∫–µ—Ç -->
      <div class="tariff-card tariff-night" onclick="openBooking(8)">
        <div class="tariff-badge"><span>–ù–æ—á–Ω–æ–π</span></div>
        <div class="tariff-icon">üåô</div>
        <div class="tariff-name">–ù–æ—á–Ω–æ–π –ø–∞–∫–µ—Ç</div>
        <div class="tariff-time">8 —á–∞—Å–æ–≤ ‚Äî –Ω–æ—á–Ω–æ–π –æ—Ç–¥—ã—Ö</div>
        <div class="tariff-price">
          <span>24 USD</span>
        </div>
        <div class="tariff-kzt">
          ‚âà <span id="p4">-</span> ‚Ç∏
        </div>
        <div class="tariff-desc">
          –î–ª—è –Ω–æ—á–Ω—ã—Ö —Ä–µ–π—Å–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∏—Ç–∞: –≤–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–∏—Ö –∫—Ä–µ—Å–µ–ª ‚Äî —Å–≤–æ—è –∫–∞–ø—Å—É–ª–∞ –Ω–∞ –≤—Å—é –Ω–æ—á—å.
        </div>
      </div>
    </div>
  </div>

  <p>–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–µ—â–µ–Ω–∏–µ.</p>
  <button class="btn" onclick="openBooking()">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
</section>

<div id="bookingPopup" class="overlay" onclick="if(event.target===this)this.style.display='none'">
  <div class="popup">
    <div class="closeBtn" onclick="bookingPopup.style.display='none'">&times;</div>
    
    <h2 style="margin-bottom:8px;">–£—Å–ª–æ–≤–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
    <ul>
      <li>üö´ –ö—É—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ</li>
      <li>üêï –ñ–∏–≤–æ—Ç–Ω—ã–µ –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è</li>
      <li>ü•° –ï–¥–∞ —Å —Å–æ–±–æ–π –∑–∞–ø—Ä–µ—â–µ–Ω–∞</li>
    </ul>

    <label for="clientName">–í–∞—à–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—è</label>
    <input id="clientName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê—è–∂–∞–Ω –¢–ª–µ—É–±–µ—Ä–≥–µ–Ω">

    <label for="clientPhone">–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏</label>
    <input id="clientPhone" placeholder="+7 7xx xxx xx xx">

    <label for="bookingDate">–î–∞—Ç–∞</label>
    <input id="bookingDate" type="date">

    <label for="bookingTime">–í—Ä–µ–º—è</label>
    <input id="bookingTime" type="time">

    <label for="bookingHours">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å—ã)</label>
    <input id="bookingHours" type="number" min="1" max="24" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2">

    <button class="btn" onclick="confirmBooking()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
  </div>
</div>

<script>
let user = JSON.parse(localStorage.getItem("user") || "null");

// üîπ —Ç–µ–ø–µ—Ä—å openBooking –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å duration (—á–∞—Å—ã)
function openBooking(duration){
  if(user){
    const fullName = ((user.firstName || "") + " " + (user.lastName || "")).trim();
    clientName.value = fullName || "";
    clientPhone.value = user.phone || "";
  } else {
    clientName.value = "";
    clientPhone.value = "";
  }

  // –µ—Å–ª–∏ –ø—Ä–∏—à–ª–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Äî –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤ –ø–æ–ª–µ
  if(duration){
    bookingHours.value = duration;
  } else {
    // –µ—Å–ª–∏ –∑–∞—à–ª–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å" ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    if(!bookingHours.value){
      bookingHours.value = "";
    }
  }

  bookingPopup.style.display = 'flex';
}

function confirmBooking(){
  const name   = clientName.value.trim();
  const phone  = clientPhone.value.trim();
  const date   = bookingDate.value;
  const time   = bookingTime.value;
  const hours  = bookingHours.value.trim();

  if(!name || !phone || !date || !time || !hours){
    alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.");
    return;
  }

  const id = "ID" + Math.floor(100000 + Math.random()*900000);

  const booking = {
    id,
    name,
    phone,
    date,
    time,
    duration: hours,
    status: "new"
  };

  let allBookings = JSON.parse(localStorage.getItem("bookings") || "[]");
  allBookings.push(booking);
  localStorage.setItem("bookings", JSON.stringify(allBookings));

  if(user){
    user.bookings = user.bookings || [];
    user.bookings.push(booking);
    localStorage.setItem("user", JSON.stringify(user));
  }

  alert("–ë—Ä–æ–Ω—å —Å–æ–∑–¥–∞–Ω–∞! –í–∞—à ID: " + id);

  bookingPopup.style.display = 'none';
  clientName.value   = "";
  clientPhone.value  = "";
  bookingDate.value  = "";
  bookingTime.value  = "";
  bookingHours.value = "";
}
</script>

<script>
// –±–∞–∑–æ–≤—ã–π –∫—É—Ä—Å (–µ—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç)
let usdToKzt = 480;

// —Ü–µ–Ω—ã –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö
const T1 = 6;   // 1 —á–∞—Å
const T2 = 10;  // 2 —á–∞—Å–∞
const T3 = 13;  // 3 —á–∞—Å–∞
const T4 = 24;  // 8 —á–∞—Å–æ–≤

function updatePrices(){
  const rateTextEl = document.getElementById("rateText");
  const p1El = document.getElementById("p1");
  const p2El = document.getElementById("p2");
  const p3El = document.getElementById("p3");
  const p4El = document.getElementById("p4");

  if(rateTextEl){
    rateTextEl.innerText = `1 USD = ${usdToKzt.toFixed(2)} ‚Ç∏`;
  }
  if(p1El) p1El.innerText = Math.round(T1 * usdToKzt);
  if(p2El) p2El.innerText = Math.round(T2 * usdToKzt);
  if(p3El) p3El.innerText = Math.round(T3 * usdToKzt);
  if(p4El) p4El.innerText = Math.round(T4 * usdToKzt);
}

async function loadRate(){
  try{
    const res = await fetch("https://api.exchangerate.host/latest?base=USD&symbols=KZT");
    const data = await res.json();
    if(data && data.rates && data.rates.KZT){
      usdToKzt = data.rates.KZT;
    }
  }catch{
    console.warn("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å USD ‚Üí KZT, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–ø–∞—Å–Ω–æ–π.");
  }
  updatePrices();
}

loadRate();
</script>

<!-- –ê–≤—Ç–æ-–∑–∞–∫—Ä—ã—Ç–∏–µ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–∞–º -->
<script>
document.querySelectorAll(".side-menu a").forEach(link => {
  link.addEventListener("click", () => {
    const toggle = document.getElementById("menuToggle");
    if (toggle) toggle.checked = false;
  });
});
</script>

</body>
</html>
