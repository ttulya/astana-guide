<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RelaxCaps ‚Äî –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Montserrat',sans-serif;background:#f0f4f8;padding-top:70px}

header{
  position:fixed;top:0;left:0;width:100%;height:60px;
  background:linear-gradient(to right,#00c6ff,#0072ff);
  display:flex;align-items:center;color:white;
  padding:0 20px;z-index:3000;
}

.burger{
  width:32px;height:22px;margin-right:15px;cursor:pointer;
  display:flex;flex-direction:column;justify-content:space-between;
}

.burger div{height:4px;background:white;border-radius:2px}

#menuToggle{display:none}

.side-menu{
  position:fixed;top:0;left:-250px;width:230px;height:100%;
  background:linear-gradient(to bottom,#00c6ff,#0072ff);
  padding-top:80px;transition:.3s;z-index:2600;
}

/* –ú–µ–Ω—é –æ—Ç–∫—Ä—ã—Ç–æ –ø—Ä–∏ checked */
#menuToggle:checked + header + .side-menu{
  left:0;
}

.side-menu a{
  color:white;display:block;padding:15px 20px;
  text-decoration:none;font-weight:600;
  border-bottom:1px solid rgba(255,255,255,0.15);
}

.side-menu a:hover{color:#ffd700}

section{
  max-width:900px;margin:20px auto;background:white;
  padding:25px;border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

h2{color:#0072ff;margin-bottom:15px}

.btn{
  display:inline-block;background:#0072ff;color:white;
  padding:10px 18px;border-radius:6px;
  text-decoration:none;margin-top:10px;cursor:pointer;border:none;
}

.btn:hover{background:#005ec4}

.overlay{
  display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);justify-content:center;
  align-items:center;z-index:5000;
}

.popup{
  background:white;padding:25px;border-radius:12px;
  width:90%;max-width:380px;text-align:left;position:relative;
}

.closeBtn{
  position:absolute;top:10px;right:15px;
  font-size:20px;cursor:pointer;
}

input{
  width:100%;padding:10px;margin:8px 0;
  border-radius:6px;border:1px solid #aaa;
  font-family:'Montserrat',sans-serif;
}

label{font-size:0.9em;color:#444}

ul{margin:10px 0 6px;padding-left:20px;text-align:left;font-size:0.9em}

/* –ë–ª–æ–∫ —Å —Ü–µ–Ω–∞–º–∏ –∏ –ø–∞–∫–µ—Ç–∞–º–∏ */
.price-box{
  background:#f5f8ff;
  border-radius:10px;
  padding:15px 18px;
  border:1px solid #dde5ff;
  margin-bottom:15px;
  font-size:0.95em;
}
.price-title{
  font-weight:600;
  color:#0072ff;
  margin-bottom:6px;
}
.price-item{
  margin:3px 0;
}
.price-item span{
  font-weight:600;
}
</style>
</head>

<body>

<!-- –ú–µ–Ω—é –æ—Ç–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
<input type="checkbox" id="menuToggle" checked />

<header>
  <label for="menuToggle" class="burger">
    <div></div><div></div><div></div>
  </label>
  <span style="font-size:1.3em;font-weight:600">RelaxCaps</span>
</header>

<aside class="side-menu">
  <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
  <a href="profile.html">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
  <a href="booking.html">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
  <a href="reviews.html">–û—Ç–∑—ã–≤—ã –∏ –æ—Ü–µ–Ω–∫–∏</a>
  <a href="contact.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
</aside>

<section>
  <h2>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>

  <!-- ========== –ë–õ–û–ö –¢–ê–†–ò–§–û–í + –ê–í–¢–û-–ö–£–†–° USD‚ÜíKZT ========== -->
  <div class="price-box">
    <div class="price-title">–¢–∞—Ä–∏—Ñ—ã –∏ –ø–∞–∫–µ—Ç—ã</div>

    <p style="margin-bottom:6px;color:#555;">
      üí± –¢–µ–∫—É—â–∏–π –∫—É—Ä—Å: <b id="rateText">–∑–∞–≥—Ä—É–∑–∫–∞...</b>
    </p>

    <p class="price-item">
      <span>–ë–∞–∑–æ–≤—ã–π:</span> 1 —á–∞—Å ‚Äî 5 USD (<span id="p1">-</span> ‚Ç∏)
    </p>
    <p class="price-item">
      <span>–°—Ç–∞–Ω–¥–∞—Ä—Ç:</span> 2 —á–∞—Å–∞ ‚Äî 8 USD (<span id="p2">-</span> ‚Ç∏)
    </p>
    <p class="price-item">
      <span>–ê–ö–¶–ò–Ø:</span> 3 —á–∞—Å–∞ ‚Äî 10 USD (<span id="p3">-</span> ‚Ç∏) üéâ
    </p>

    <p style="margin-top:6px;">* –í—Å–µ —Ü–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ç–µ–Ω–≥–µ –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É.</p>
  </div>
  <!-- ======================================================== -->

  <p>–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–µ—â–µ–Ω–∏–µ. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–º–æ–∂–µ—Ç —Å–≤—è–∑–∞—Ç—å—Å—è —Å –≤–∞–º–∏.</p>
  <button class="btn" onclick="openBooking()">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
</section>

<div id="bookingPopup" class="overlay" onclick="if(event.target===this)this.style.display='none'">
  <div class="popup">
    <div class="closeBtn" onclick="bookingPopup.style.display='none'">&times;</div>
    <h2 style="margin-bottom:8px;">–£—Å–ª–æ–≤–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
    <ul>
      <li>üö´ –ö—É—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ</li>
      <li>üêï –ñ–∏–≤–æ—Ç–Ω—ã–µ –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è</li>
      <li>ü•° –ï–¥–∞ —Å —Å–æ–±–æ–π –∑–∞–ø—Ä–µ—â–µ–Ω–∞</li>
    </ul>

    <label for="clientName">–í–∞—à–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—è</label>
    <input id="clientName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê—è–∂–∞–Ω –¢–ª–µ—É–±–µ—Ä–≥–µ–Ω">

    <label for="clientPhone">–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏</label>
    <input id="clientPhone" placeholder="+7 7xx xxx xx xx">

    <label for="bookingDate">–î–∞—Ç–∞</label>
    <input id="bookingDate" type="date">

    <label for="bookingTime">–í—Ä–µ–º—è</label>
    <input id="bookingTime" type="time">

    <label for="bookingHours">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å—ã)</label>
    <input id="bookingHours" type="number" min="1" max="24" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2">

    <button class="btn" onclick="confirmBooking()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
  </div>
</div>

<script>
// –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–µ—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω)
let user = JSON.parse(localStorage.getItem("user") || "null");

function openBooking(){
  if(user){
    const fullName = ((user.firstName || "") + " " + (user.lastName || "")).trim();
    clientName.value = fullName || "";
    clientPhone.value = user.phone || "";
  }
  bookingPopup.style.display = 'flex';
}

function confirmBooking(){
  const name   = clientName.value.trim();
  const phone  = clientPhone.value.trim();
  const date   = bookingDate.value;
  const time   = bookingTime.value;
  const hours  = bookingHours.value.trim();

  if(!name || !phone || !date || !time || !hours){
    alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.");
    return;
  }

  const id = "ID" + Math.floor(100000 + Math.random()*900000);

  // üëá –î–û–ë–ê–í–õ–ï–ù –°–¢–ê–¢–£–° –ù–û–í–û–ô –ó–ê–Ø–í–ö–ò
  const booking = {
    id,
    name,
    phone,
    date,
    time,
    duration: hours,
    status: "new" // –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  };

  let allBookings = JSON.parse(localStorage.getItem("bookings") || "[]");
  allBookings.push(booking);
  localStorage.setItem("bookings", JSON.stringify(allBookings));

  if(user){
    user.bookings = user.bookings || [];
    user.bookings.push(booking);
    localStorage.setItem("user", JSON.stringify(user));
  }

  alert(
    "–ë—Ä–æ–Ω—å —Å–æ–∑–¥–∞–Ω–∞!\n" +
    "–í–∞—à ID: " + id + "\n\n" +
    "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –ø–æ –Ω–æ–º–µ—Ä—É: " + phone
  );

  bookingPopup.style.display = 'none';
  clientName.value = "";
  clientPhone.value = "";
  bookingDate.value = "";
  bookingTime.value = "";
  bookingHours.value = "";
}
</script>

<!-- ========== –ê–í–¢–û-–ü–û–õ–£–ß–ï–ù–ò–ï –ö–£–†–°–ê USD‚ÜíKZT –ò –ü–ï–†–ï–°–ß–Å–¢ –¶–ï–ù ========== -->
<script>
let usdToKzt = 480; // –∑–∞–ø–∞—Å–Ω–æ–π –∫—É—Ä—Å

function updatePrices(){
  document.getElementById("rateText").innerText = `1 USD = ${usdToKzt.toFixed(2)} ‚Ç∏`;
  document.getElementById("p1").innerText = Math.round(5 * usdToKzt);
  document.getElementById("p2").innerText = Math.round(8 * usdToKzt);
  document.getElementById("p3").innerText = Math.round(10 * usdToKzt);
}

async function loadRate(){
  try{
    const res = await fetch("https://api.exchangerate.host/latest?base=USD&symbols=KZT");
    const data = await res.json();
    if(data && data.rates && data.rates.KZT){
      usdToKzt = data.rates.KZT;
    }
  }catch{
    console.warn("–ö—É—Ä—Å –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–ø–∞—Å–Ω–æ–π");
  }
  updatePrices();
}

loadRate();
</script>
<!-- =============================================================== -->

</body>
</html>
